+++
title = "[机械臂动力学] 牛顿-欧拉递推动力学方程——速度和加速度的外推法"
date = 2026-02-18T00:00:00+08:00
draft = false
columns = ["控制/机器人学/动力学"]
tags = ["控制", "动力学", "机械臂", "理论力学", "机器人"]
+++

## 写在前面
在推导牛顿-欧拉递推动力学方程时遇到这个问题，故记录一下

该问题属于**矢量微分与坐标投影**

会用到 [传输定理](https://blog.csdn.net/m0_59475014/article/details/157430985?spm=1011.2415.3001.5331)，我的[另一篇博客](https://blog.csdn.net/m0_59475014/article/details/157430985?spm=1011.2415.3001.5331)已有记录
## 核心思想

在处理刚体运动学与动力学方程时，严格区分**物理矢量 (Physical Vector)** 与 **代数表示 (Algebraic Representation)** 是至关重要的。

* **物理层：** 关注矢量本身的物理演化（如速度叠加、力的平衡）。在此阶段进行微分运算，利用传输定理处理参考系变换
* **计算层：** 将推导完成的物理矢量投影到特定的参考坐标系（如连杆坐标系 $\{i\}$）中，转化为计算机可处理的矩阵/数组运算

**原则：** 微分运算发生在物理层，投影运算发生在计算层。**切勿在投影之后再试图对旋转矩阵求导**

---

## 符号定义

为明确区分上述两个图层，定义如下符号体系：

| 符号形式 | 含义 | 数学性质 |
| --- | --- | --- |
| $\vec{v}$ | **物理矢量** | 几何实体，客观存在，不依赖于坐标系的选择 |
| ${}^{A}v$ | **坐标表示** |  $\vec{v}$ 在坐标系 $\{A\}$ 下的投影分量 $(x, y, z)^T$，属于 $\mathbb{R}^3$ |
| $\frac{d}{dt}$ | **绝对导数** | 默认指相对于**惯性系(基座)** 的时间变化率 |
| ${}^{B}_{A}R$ | **旋转矩阵** | 将 $\{A\}$ 系下的表示转换为 $\{B\}$ 系下的表示的算子 |


---

## 推导流程

以连杆 $i+1$ 的角加速度 $\dot{\omega}_{i+1}$ 为例

### 物理层求导

**目标：** 获取惯性系下的角加速度矢量 $\vec{\dot{\omega}}_{i+1}$

1. **建立速度关系（矢量叠加）：**
连杆 $i+1$ 的角速度等于连杆 $i$ 的角速度加上关节 $i+1$ 的相对转动。$$\vec{\omega}_{i+1} = \vec{\omega}_i + \dot{\theta}_{i+1} \hat{Z}_{i+1}$$
2. **求绝对导数（对时间 $t$ 微分）：**$$\vec{\dot{\omega}}_{i+1} = \frac{d}{dt}(\vec{\omega}_i) + \frac{d}{dt}(\dot{\theta}_{i+1} \hat{Z}_{i+1})$$
3. **展开各项（应用传输定理）：**
	* 第一项：$\frac{d}{dt}(\vec{\omega}_i) = \vec{\dot{\omega}}_i$ （前一连杆的角加速度）
	* 第二项：应用链式法则与传输定理。注意 $\hat{Z}_{i+1}$ 是跟随连杆 $i$ 运动的矢量，是会随着时间运动的
	$$\begin{aligned}
\frac{d}{dt}(\dot{\theta}_{i+1} \hat{Z}_{i+1}) &= \ddot{\theta}_{i+1} \hat{Z}_{i+1} + \dot{\theta}_{i+1} \left( \frac{d\hat{Z}_{i+1}}{dt} \right) \\
&= \ddot{\theta}_{i+1} \hat{Z}_{i+1} + \dot{\theta}_{i+1} (\vec{\omega}_i \times \hat{Z}_{i+1})
\end{aligned}$$
(此处 $\vec{\omega}_i \times \hat{Z}_{i+1}$ 即为科里奥利/耦合项的物理来源)
4. **获得矢量公式：**
	$$\vec{\dot{\omega}}_{i+1} = \vec{\dot{\omega}}_i + \ddot{\theta}_{i+1} \hat{Z}_{i+1} + \vec{\omega}_i \times (\dot{\theta}_{i+1} \hat{Z}_{i+1})$$

### 计算层投影

**目标：** 将上述矢量公式投影到连杆坐标系 $\{i+1\}$中，以便进行数值迭代

利用旋转矩阵 ${}^{i+1}_{i}R$ 将所有定义在 $\{i\}$ 系下的矢量转换到 $\{i+1\}$ 系。$${}^{i+1}\dot{\omega}_{i+1} = \underbrace{{}^{i+1}_{i}R \cdot {}^{i}\dot{\omega}_i}_{\text{前级传递}} + \underbrace{\ddot{\theta}_{i+1} \cdot {}^{i+1}\hat{Z}_{i+1}}_{\text{驱动项}} + \underbrace{{}^{i+1}_{i}R \cdot ({}^{i}\omega_i \times \dot{\theta}_{i+1} {}^{i}\hat{Z}_{i+1})}_{\text{耦合项投影}}$$

可以这么做的原因是我们之前写的一直是**矢量等式**，该等式与参考系无关，而是一种成立的客观事实，换句话说，在任意坐标系下（所有项需要在同一坐标系下），该等式仍成立；所以在可以给矢量等式任意添加左上角标，以实现投影到目标坐标系

---

## 为什么不直接对坐标求导

如果试图在坐标表示层直接求导（例如对 ${}^{0}v = R \cdot {}^{i}v$ 求导），将引入旋转矩阵的时间导数 $\dot{R}$：$$\dot{R} = S(\omega) \cdot R$$

这将导致方程中充斥着复杂的矩阵微分项，且极易混淆“局部变化”与“整体变化”。

而“先矢量后投影”的计算方式有如下的优点：

1. 物理清晰： 每一项（如 $\vec{\omega} \times \vec{v}$）都有明确的物理对应（如科里奥利力、向心力）
2. 避免矩阵微分： 巧妙地利用 $\vec{\omega} \times$ 算子替代了繁琐的 $\dot{R}$ 计算
3. 通用： 推导出的矢量公式适用于任何坐标系定义，仅在最后一步投影时才代入具体的 DH 参数或旋转矩阵。
