+++
title = "[机械臂动力学] 牛顿-欧拉递推动力学方程——力和力矩的内推法"
date = 2026-02-18T00:00:00+08:00
draft = false
columns = ["控制/机器人学/动力学"]
tags = ["控制", "动力学", "机械臂", "理论力学", "机器人"]
+++

## 写在前面
借鉴Craig 的《机器人学导论》第六章（动力学）**牛顿-欧拉（Newton-Euler）内推法**

本文主要是为了梳理一下那个又长角标又多的内推公式到底在做什么

---

## 核心思想：供需平衡

1. 显而易见的是，公式都是等式；
2. 我们引入了旋转系（本体系），这让我们可以脱离高中“非稳态下就不能受力平衡的思想限制”，我们可以用虚拟力来让物体受力平衡；
3. 在力矩等式中，本质上就是将外力/力矩、虚拟力、保守力等施加在同一物体质点上的力/力矩写到同一式子里，且左右天然相等（供需平衡，合外力/力矩和产生的运动效果等价，这里的运动效果可以用虚拟力表示）

连杆 $i$ 的驱动端（关节 $i$），需要提供的力矩（$^in_i$）必须足够满足以下三部分的输出：

1. **下一级连杆索要的力矩：** 连杆 $i+1$ 对连杆 $i$ 施加的反作用力矩（或者说你需要传导给下一级的力矩）。
2. **移动自身质量需要的力矩（惯性力矩）：** 让你这根棍子自己转动起来需要的净力矩。
3. **对抗力的力矩（力臂效应）：** 这根棍子上受到的各种线性力（比如下一级传回来的反作用力、自身的惯性力），因为没有作用在关节轴心上，会产生额外的扭转效应。

**力矩平衡方程（针对关节 $i$ 取矩）就是说：**
$$\text{左端输入的力矩} + \text{所有力对左端产生的力矩} = \text{改变角动量所需的力矩 (即 } \mathbf{N}_i \text{)}$$

Craig 的公式只是对上述等式进行了移项：
$$\mathbf{n}_i = \text{下一级传回的力矩} + \text{惯性力矩} + \text{惯性力造成的杠杆力矩} + \text{下一级力造成的杠杆力矩}$$

---

## 逐项拆解方程

Craig 书中的向内递归（Backward Recursion）力矩方程（6.42）如下（这里省略坐标系左上标，假设都在坐标系 $\{i\}$ 下）：
$$\mathbf{n}_i = \mathbf{N}_i + ^{i}_{i+1}R \cdot \mathbf{n}_{i+1} + \mathbf{P}_{C_i} \times \mathbf{F}_i + \mathbf{P}_{i+1} \times (^{i}_{i+1}R \cdot \mathbf{f}_{i+1})$$
### A. 左边项：$\mathbf{n}_i$ (我们需要求的)

* **含义**：这是连杆 $i-1$ 施加在连杆 $i$ 上的总力矩，也就是关节电机$i$对连杆$i$产生的力矩
* **物理意义**：这是关节 $i$ 的电机需要提供的总负载（当然最后还得投影到关节轴 $\hat{Z}_i$ 上才是电机扭矩 $\tau$）

### B. 右边第一项：$\mathbf{N}_i$ (自身旋转的成本)

* **公式**：$\mathbf{N}_i = \mathbf{I}_{C_i} \dot{\omega}_i + \omega_i \times (\mathbf{I}_{C_i} \omega_i)$（6.30）
* **含义**：这是**欧拉方程**的核心。它是让连杆 $i$ 这个刚体产生角加速度（$\dot{\omega}$）以及维持旋转状态（陀螺效应）所必须消耗的净力矩，这是一个效果力，不是一个真实的力
* **注意**：这个力矩是作用在**质心**  $C_i$上的。

### C. 右边第二项：$^{i}_{i+1}R \cdot \mathbf{n}_{i+1}$ (传递给下一级的)

* **含义**：这是连杆 $i+1$作用给连杆 $i$的力矩，处理的是下一级的**姿态旋转**（包括转动惯量和陀螺效应）对关节造成的直接扭转负担
* **为什么有**$R$？：因为 $\mathbf{n}_{i+1}$ 原本是在坐标系 $\{i+1\}$ 里描述的，我们现在在计算坐标系 $\{i\}$ 的平衡，所以必须用旋转矩阵把它变换过来

### D. 右边第三项：$\mathbf{P}_{C_i} \times \mathbf{F}_i$ (惯性力的力臂效应)

* $\mathbf{F}_i$ 是牛顿方程算出来的惯性力 ($F=ma$)。它是一个“虚拟力”（达朗贝尔原理），作用在质心 $C_i$ 上
* $\mathbf{P}_{C_i}$ 是从关节 $i$ 原点指向质心 $C_i$ 的位置矢量
* **物理意义**：虽然惯性力 $\mathbf{F}_i$ 是平移力，但因为它不过关节轴心（原点），就像你推门没推在门轴上一样，就会产生一个力矩，也就是**力 $\times$ 力臂**
* 连杆 $i$ 自身的质心平移（在做加速运动时产生的惯性力 $\mathbf{F}_i$）乘上 力臂给连杆 $i$ 的起始端 $O_i$的力矩
* 在[惯性张量](https://blog.csdn.net/m0_59475014/article/details/157974505?spm=1001.2014.3001.5501)的博客中，关于惯性积的讨论有涉及到这部分内容，即为什么L形连杆旋转时会感受到一端对另一端的牵扯

### E. 右边第四项：$\mathbf{P}_{i+1} \times (^{i}_{i+1}R \cdot \mathbf{f}_{i+1})$ (下一级反作用力的力臂效应)

* **含义**：连杆 $i+1$ 对连杆 $i$ 施加了一个反作用力 $\mathbf{f}_{i+1}$（注意这里其实是把力传导回来）
* **位置**：这个力作用在连杆 $i$ 的末端（即坐标系 $\{i+1\}$ 的原点）
* **力臂**：$\mathbf{P}_{i+1}$ 是从关节 $i$ 原点指向关节 $i+1$ 原点的向量（即连杆长度向量）
* **物理意义**：这一项处理的是下一级的**质心平移**（包括重力下落的趋势和挥舞时的甩动）对关节造成的杠杆负担；比如大臂不动的同时甩动小臂，这时大臂也能感受到一股“冲击”


## 区分 $N$ 和 $n$：
* 大写 ：**净力矩**（Net Torque），只与刚体自身的旋转状态 ($I, \dot{\omega}, \omega$) 有关
* 小写 ：**关节力矩**（Inter-link Torque），是连杆之间传递的负载
